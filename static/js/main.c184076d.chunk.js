(this.webpackJsonpryandezvous=this.webpackJsonpryandezvous||[]).push([[0],{116:function(e,t,a){e.exports=a.p+"static/media/logo.7f2c5d69.svg"},117:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(9),i=a.n(o),u=(a(98),a(14)),l=a.n(u),c=a(7),s=a(18),m=a(13),d=a(26),h=a(28),f=a(17),p=a(29),v=a(168),g=a(12),D=a(172),y=a(42),b=a(33),E=a.n(b),w=a(51),x=a.n(w),F=a(170),T=(a(101),a(102),a(70)),k=(a(116),a(117),a(20)),C=a(171),M=a(173),S=a(76),_=a.n(S),O=a(169),A=a(161),j=a(71),R=a.n(j),H=a(72),I=a.n(H),P=a(73),L=a.n(P),V=Object(A.a)((function(e){return{icon:{color:e.palette.text.secondary,marginRight:e.spacing(2)}}}));function Y(e){var t=V(),a=n.a.useState(""),r=Object(k.a)(a,2),o=r[0],i=r[1],u=n.a.useState([]),c=Object(k.a)(u,2),s=c[0],m=c[1],d=n.a.useRef(!1),h=e.label;d.current=!0;var f=function(e,t){i(e.target.value)},p=n.a.useMemo((function(){return L()((function(e,t){var a,r;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(fetch("https://kiwiproxy.herokuapp.com//locations/query?term="+e.input));case 2:return a=n.sent,n.next=5,l.a.awrap(a.json());case 5:r=n.sent,t(r.locations.map((function(t){return Object.assign(t,{input:e.input})})));case 7:case"end":return n.stop()}}))}),200)}),[]);return n.a.useEffect((function(){var e=!0;if(""!==o)return p({input:o},(function(t){e&&m(t||[])})),function(){e=!1};m([])}),[o,p]),n.a.createElement(M.a,{style:{width:"240px"},getOptionLabel:function(e){return"string"===typeof e?e:e.name},filterOptions:function(e){return e},options:s,onChange:function(t,a){e.onChange({target:{name:e.name,value:a.code}})},renderInput:function(e){return n.a.createElement(C.a,Object.assign({},e,{label:h,variant:"outlined",fullWidth:!0,autoHighlight:!0,onChange:f}))},renderOption:function(e){var a=R()(e.name,I()(e.name,e.input));return n.a.createElement(v.a,{container:!0,alignItems:"center"},n.a.createElement(v.a,{item:!0},n.a.createElement(_.a,{className:t.icon})),n.a.createElement(v.a,{item:!0,xs:!0},a.map((function(e,t){return n.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})),n.a.createElement(O.a,{variant:"body2",color:"textSecondary"},e.name)))}})}window.moment=E.a;var z=[];var B=function(){var e=[{title:"Price",field:"price",formatter:"money",formatterParams:{symbol:"\u20ac",precision:0},headerFilter:!0,headerFilterFunc:function(e,t){return e>=t}},{title:"Destination",field:"destination",headerFilter:!0},{title:"You",columns:[{title:"Arrival",field:"myArrivalDate",align:"center",formatter:"datetime",formatterParams:{outputFormat:"ddd DD MMM HH:mm"}},{title:"Return",field:"myReturnDate",align:"center",formatter:"datetime",formatterParams:{outputFormat:"ddd DD MMM HH:mm"}},{title:"Link",field:"myLink",formatter:"link",formatterParams:{label:"Buy",target:"_blank"}}]},{title:"Them",columns:[{title:"Arrival",field:"herArrivalDate",align:"center",formatter:"datetime",formatterParams:{outputFormat:"ddd DD MMM HH:mm"}},{title:"Return",field:"herReturnDate",align:"center",formatter:"datetime",formatterParams:{outputFormat:"ddd DD MMM HH:mm"}},{title:"Link",field:"herLink",formatter:"link",formatterParams:{label:"Buy",target:"_blank"}}]},{title:"Together",field:"timeTogether",formatter:function(e,t,a){return e.getValue().humanize()},headerFilter:!0,headerFilterFunc:function(e,t){return G(e)<=t}},{title:"Apart",field:"timeApart",formatter:function(e,t,a){return e.getValue().humanize()},headerFilter:!0,headerFilterFunc:function(e,t){return G(e)>=t}}];return n.a.createElement("div",null,n.a.createElement(N,null),n.a.createElement("div",{id:"loading"},"\u2708"),n.a.createElement(T.ReactTabulator,{data:z,columns:e,options:{height:"100%",layout:"fitColumns",reactiveData:!0}}))},W="https://kiwiproxy.herokuapp.com/v2/search?fly_from=<airport>&dateFrom=<outDateFrom>&dateTo=<outDateTo>&returnFrom=<inDateFrom>&returnTo=<inDateTo>&curr=EUR&ret_from_diff_airport=0";function J(e){var t=new Date;return E()(t.setDate(t.getDate()+e))}var N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))},a.renderInput=function(e){return e.name},a.state={departureDateFrom:J(5),departureDateTo:J(6),returnDateFrom:J(9),returnDateTo:J(10)},a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.doStuff=a.doStuff.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"doStuff",value:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.awrap(l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:x()("#loading").show();case 1:case"end":return e.stop()}})));case 2:return 72,e.next=5,l.a.awrap($(this.state.myAirport,this.state.herAirport,72,z,this.state.departureDateFrom,this.state.departureDateTo,this.state.returnDateFrom,this.state.returnDateTo));case 5:console.log(z),l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:x()("#loading").hide();case 1:case"end":return e.stop()}}));case 7:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(v.a,{container:!0},n.a.createElement(v.a,{item:!0,xs:6,sm:2},n.a.createElement(g.a,{name:"departureDateFrom",utils:y.a},n.a.createElement(D.a,{label:"Departure from",value:this.state.departureDateFrom,inputVariant:"outlined",onChange:function(t){return e.setState({departureDateFrom:t})}}))),n.a.createElement(v.a,{item:!0,xs:6,sm:2},n.a.createElement(g.a,{name:"departureDateTo",utils:y.a},n.a.createElement(D.a,{label:"to",value:this.state.departureDateTo,inputVariant:"outlined",onChange:function(t){return e.setState({departureDateTo:t})}}))),n.a.createElement(v.a,{item:!0,xs:6,sm:2},n.a.createElement(g.a,{name:"returnDateFrom",utils:y.a},n.a.createElement(D.a,{label:"Return from",value:this.state.returnDateFrom,inputVariant:"outlined",onChange:function(t){return e.setState({returnDateFrom:t})}}))),n.a.createElement(v.a,{item:!0,xs:6,sm:2},n.a.createElement(g.a,{name:"returnDateTo",utils:y.a},n.a.createElement(D.a,{label:"to",value:this.state.returnDateTo,inputVariant:"outlined",onChange:function(t){return e.setState({returnDateTo:t})}}))),n.a.createElement(v.a,{item:!0,xs:6,sm:2},n.a.createElement(Y,{id:"myAirport",name:"myAirport",value:this.state.myAirport,onChange:this.handleChange,label:"Your origin",renderInput:this.renderInput})),n.a.createElement(v.a,{item:!0,xs:6,sm:2},n.a.createElement(Y,{id:"herAirport",name:"herAirport",value:this.state.herAirport,onChange:this.handleChange,label:"Their origin",renderInput:this.renderInput})),n.a.createElement(v.a,{item:!0,xs:6,sm:2},n.a.createElement(F.a,{variant:"contained",color:"primary",onClick:this.doStuff},"Search"))))}}]),t}(n.a.Component);function q(e){return e.format("DD/MM/YYYY")}function U(e,t,a,r,n,o){var i;return l.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return i=W.replace("<airport>",e).replace("<outDateFrom>",q(a)).replace("<outDateTo>",q(r)).replace("<inDateFrom>",q(n)).replace("<inDateTo>",q(o)),u.next=3,l.a.awrap(x.a.getJSON(i,(function(e){(e.data||[]).forEach((function(e){t.push(e)}))})));case 3:case"end":return u.stop()}}))}function $(e,t,a,r,n,o,i,u){var c,s,m;return l.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return c=function(e,t){var n=new Date(e.route[0].local_arrival),o=new Date(t.route[0].local_arrival),i=new Date(e.route[e.route.length-1].local_arrival),u=new Date(t.route[t.route.length-1].local_arrival),l=Math.abs(n-o),c=Math.abs(i-u),s=Math.min(i,u)-Math.max(n,o),m=l+c;l+c>60*a*60*1e3||e.cityCodeTo===t.cityCodeTo&&(s<864e5||s<=m||r.push({day:e.route[0].local_departure,destination:e.cityTo+", "+e.countryTo.name,myArrivalDate:e.route[0].local_arrival,herArrivalDate:t.route[0].local_arrival,myReturnDate:e.route[e.route.length-1].local_arrival,herReturnDate:t.route[t.route.length-1].local_arrival,myDepartureDate:e.route[0].local_departure,herDepartureDate:t.route[0].local_departure,price:e.price+t.price,timeApart:E.a.duration(m),timeTogether:E.a.duration(s),myLink:e.deep_link,herLink:t.deep_link}))},s=[],m=[],d.next=5,l.a.awrap(U(e,s,n,o,i,u));case 5:return d.next=7,l.a.awrap(U(t,m,n,o,i,u));case 7:s.forEach((function(e){m.forEach((function(t){c(e,t)}))}));case 8:case"end":return d.stop()}}))}function G(e){var t=e.split(" "),a="a"===t[0]||"an"===t[0]?1:parseInt(t[0]),r="s"===t[1][t[1].length-1]?t[1]:t[1]+"s";return E.a.duration(a,r)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},93:function(e,t,a){e.exports=a(132)},98:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.c184076d.chunk.js.map