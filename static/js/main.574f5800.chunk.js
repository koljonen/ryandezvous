(this.webpackJsonpryandezvous=this.webpackJsonpryandezvous||[]).push([[0],{117:function(e,t,a){e.exports=a.p+"static/media/logo.7f2c5d69.svg"},118:function(e,t,a){},133:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(9),o=a.n(i),u=(a(99),a(14)),l=a.n(u),c=a(7),m=a(18),s=a(13),d=a(26),p=a(28),h=a(17),f=a(29),v=a(70),g=a.n(v),D=a(169),y=a(12),b=a(173),E=a(42),w=a(30),x=a.n(w),k=a(51),F=a.n(k),A=a(171),T=(a(102),a(103),a(71)),C=(a(117),a(118),a(20)),M=a(172),_=a(174),S=a(77),O=a.n(S),j=a(170),R=a(162),I=a(72),H=a.n(I),L=a(73),P=a.n(L),V=a(74),Y=a.n(V),z=Object(R.a)((function(e){return{icon:{color:e.palette.text.secondary,marginRight:e.spacing(2)}}}));function B(e){var t=z(),a=n.a.useState(""),r=Object(C.a)(a,2),i=r[0],o=r[1],u=n.a.useState([]),c=Object(C.a)(u,2),m=c[0],s=c[1],d=n.a.useRef(!1),p=e.label;d.current=!0;var h=function(e,t){o(e.target.value)},f=n.a.useMemo((function(){return Y()((function(e,t){var a,r;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(fetch("https://kiwiproxy.herokuapp.com//locations/query?term="+e.input));case 2:return a=n.sent,n.next=5,l.a.awrap(a.json());case 5:r=n.sent,t(r.locations.map((function(t){return Object.assign(t,{input:e.input})})));case 7:case"end":return n.stop()}}))}),200)}),[]);return n.a.useEffect((function(){var e=!0;if(""!==i)return f({input:i},(function(t){e&&s(t||[])})),function(){e=!1};s([])}),[i,f]),n.a.createElement(_.a,{style:{width:"240px"},getOptionLabel:function(e){return"string"===typeof e?e:e.name},filterOptions:function(e){return e},options:m,defaultvalue:m.value,onChange:function(t,a){e.onChange({target:{name:e.name,value:a}})},renderInput:function(e){return n.a.createElement(M.a,Object.assign({},e,{label:p,variant:"outlined",fullWidth:!0,autoHighlight:!0,onChange:h}))},renderOption:function(e){var a=H()(e.name,P()(e.name,e.input));return n.a.createElement(D.a,{container:!0,alignItems:"center"},n.a.createElement(D.a,{item:!0},n.a.createElement(O.a,{className:t.icon})),n.a.createElement(D.a,{item:!0,xs:!0},a.map((function(e,t){return n.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})),n.a.createElement(j.a,{variant:"body2",color:"textSecondary"},e.name)))}})}window.moment=x.a,x.a.updateLocale("en",{week:{dow:1}});var W=[];var J=function(){var e=[{title:"Price",field:"price",formatter:"money",formatterParams:{symbol:"\u20ac",precision:0},headerFilter:!0,headerFilterFunc:function(e,t){return e>=t}},{title:"Destination",field:"destination",headerFilter:!0},{title:"You",columns:[{title:"Arrival",field:"myArrivalDate",align:"center",formatter:"datetime",formatterParams:{outputFormat:"ddd DD MMM HH:mm"}},{title:"Return",field:"myReturnDate",align:"center",formatter:"datetime",formatterParams:{outputFormat:"ddd DD MMM HH:mm"}},{title:"Link",field:"myLink",formatter:"link",formatterParams:{label:"Buy",target:"_blank"}}]},{title:"Them",columns:[{title:"Arrival",field:"herArrivalDate",align:"center",formatter:"datetime",formatterParams:{outputFormat:"ddd DD MMM HH:mm"}},{title:"Return",field:"herReturnDate",align:"center",formatter:"datetime",formatterParams:{outputFormat:"ddd DD MMM HH:mm"}},{title:"Link",field:"herLink",formatter:"link",formatterParams:{label:"Buy",target:"_blank"}}]},{title:"Together",field:"timeTogether",formatter:function(e,t,a){return e.getValue().humanize()},headerFilter:!0,headerFilterFunc:function(e,t){return K(e)<=t}},{title:"Apart",field:"timeApart",formatter:function(e,t,a){return e.getValue().humanize()},headerFilter:!0,headerFilterFunc:function(e,t){return K(e)>=t}}];return n.a.createElement("div",null,n.a.createElement(N,null),n.a.createElement("div",{id:"loading"},"\u2708"),n.a.createElement(T.ReactTabulator,{data:W,columns:e,options:{height:"100%",layout:"fitColumns",reactiveData:!0}}))};function q(e){var t=new Date;return x()(t.setDate(t.getDate()+e))}var N=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))},a.renderInput=function(e){return e.name},a.state={departureDateFrom:q(5),departureDateTo:q(6),returnDateFrom:q(9),returnDateTo:q(10),myAirport:{code:"MLA",name:"Malta"},herAirport:{code:"FRA",name:"Frankfurt"},destinationAirport:{}},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.doStuff=a.doStuff.bind(Object(h.a)(a)),a}return Object(f.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"doStuff",value:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.awrap(l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:F()("#loading").show();case 1:case"end":return e.stop()}})));case 2:return e.next=4,l.a.awrap(G(this.state));case 4:l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:F()("#loading").hide();case 1:case"end":return e.stop()}}));case 5:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(D.a,{container:!0,spacing:2},n.a.createElement(D.a,{item:!0,sm:6,md:3,xl:2},n.a.createElement(y.a,{name:"departureDateFrom",utils:E.a},n.a.createElement(b.a,{variant:"inline",datepicker:!0,label:"Departure from",value:this.state.departureDateFrom,inputVariant:"outlined",onChange:function(t){return e.setState({departureDateFrom:t})}}))),n.a.createElement(D.a,{item:!0,sm:6,md:3,xl:2},n.a.createElement(y.a,{name:"departureDateTo",utils:E.a},n.a.createElement(b.a,{variant:"inline",datepicker:!0,label:"to",value:this.state.departureDateTo,inputVariant:"outlined",onChange:function(t){return e.setState({departureDateTo:t})}}))),n.a.createElement(D.a,{item:!0,sm:6,md:3,xl:2},n.a.createElement(y.a,{name:"returnDateFrom",utils:E.a},n.a.createElement(b.a,{variant:"inline",datepicker:!0,label:"Return from",value:this.state.returnDateFrom,inputVariant:"outlined",onChange:function(t){return e.setState({returnDateFrom:t})}}))),n.a.createElement(D.a,{item:!0,sm:6,md:3,xl:2},n.a.createElement(y.a,{name:"returnDateTo",utils:E.a},n.a.createElement(b.a,{variant:"inline",datepicker:!0,label:"to",value:this.state.returnDateTo,inputVariant:"outlined",onChange:function(t){return e.setState({returnDateTo:t})}}))),n.a.createElement(D.a,{item:!0,sm:6,md:3,xl:2},n.a.createElement(B,{id:"myAirport",name:"myAirport",value:this.state.myAirport,onChange:this.handleChange,label:"Your origin",renderInput:this.renderInput})),n.a.createElement(D.a,{item:!0,sm:6,md:3,xl:2},n.a.createElement(B,{id:"herAirport",name:"herAirport",value:this.state.herAirport,onChange:this.handleChange,label:"Their origin",renderInput:this.renderInput})),n.a.createElement(D.a,{item:!0,sm:6,md:3,xl:2},n.a.createElement(B,{id:"destinationAirport",name:"destinationAirport",value:this.state.destinationAirport,onChange:this.handleChange,label:"Destination",renderInput:this.renderInput})),n.a.createElement(D.a,{item:!0,sm:6,md:3,xl:2},n.a.createElement(A.a,{variant:"contained",color:"primary",onClick:this.doStuff},"Search"))))}}]),t}(n.a.Component);function U(e){return e.format("DD/MM/YYYY")}function $(e,t){var a,r;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a=[],r=g()("https://kiwiproxy.herokuapp.com",{path:"v2/search",queryParams:{fly_from:e.code,dateFrom:U(t.departureDateFrom),dateTo:U(t.departureDateTo),returnFrom:U(t.returnDateFrom),returnTo:U(t.returnDateTo),curr:"EUR",ret_from_diff_airport:0,fly_to:t.destinationAirport.code,max_stopovers:0}}).replace(/%2F/g,"/"),n.next=4,l.a.awrap(F.a.getJSON(r,(function(e){(e.data||[]).forEach((function(e){a.push(e)}))})));case 4:return n.abrupt("return",a);case 5:case"end":return n.stop()}}))}function G(e){var t,a,r;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=function(e,t){var a=new Date(e.route[0].local_arrival),r=new Date(t.route[0].local_arrival),n=new Date(e.route[e.route.length-1].local_arrival),i=new Date(t.route[t.route.length-1].local_arrival),o=Math.abs(a-r),u=Math.abs(n-i),l=Math.min(n,i)-Math.max(a,r),c=o+u;o+u>1296e5||e.cityCodeTo===t.cityCodeTo&&(l<864e5||l<=c||W.push({day:e.route[0].local_departure,destination:e.cityTo+", "+e.countryTo.name,myArrivalDate:e.route[0].local_arrival,herArrivalDate:t.route[0].local_arrival,myReturnDate:e.route[e.route.length-1].local_arrival,herReturnDate:t.route[t.route.length-1].local_arrival,myDepartureDate:e.route[0].local_departure,herDepartureDate:t.route[0].local_departure,price:e.price+t.price,timeApart:x.a.duration(c),timeTogether:x.a.duration(l),myLink:e.deep_link,herLink:t.deep_link}))},n.next=3,l.a.awrap($(e.myAirport,e));case 3:return a=n.sent,n.next=6,l.a.awrap($(e.herAirport,e));case 6:r=n.sent,a.forEach((function(e){r.forEach((function(a){t(e,a)}))}));case 8:case"end":return n.stop()}}))}function K(e){var t=e.split(" "),a="a"===t[0]||"an"===t[0]?1:parseInt(t[0]),r="s"===t[1][t[1].length-1]?t[1]:t[1]+"s";return x.a.duration(a,r)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},94:function(e,t,a){e.exports=a(133)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.574f5800.chunk.js.map